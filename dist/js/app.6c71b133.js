(function(){"use strict";var e={2956:function(e,t,a){var i=a(9963),n=a(6252);const l={class:"main-bar"},r=(0,n._)("h1",{style:{"font-style":"italic","font-size":"2.2em"}},"KCA",-1),d={id:"nav"};function s(e,t,a,i,s,o){const c=(0,n.up)("router-link"),u=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",l,[r,(0,n._)("div",d,[(0,n.Wm)(c,{to:"/"},{default:(0,n.w5)((()=>[(0,n.Uk)("Hoofdscherm")])),_:1}),(0,n.Wm)(c,{to:"/mededelingen"},{default:(0,n.w5)((()=>[(0,n.Uk)("Mededelingen")])),_:1})])]),(0,n.Wm)(u,{filialen:e.filialen},null,8,["filialen"])],64)}var o=a(3907),c=a(7327);class u{getAllFilialen(){this.abstractError()}addMededeling(){this.abstractError()}abstractError(){throw new Error("This class is abstract")}}var g=a(5503);a(4642);const m={apiKey:"AIzaSyDF2m4vvAS0zQXfn2NQgQxrDZGRblq0wY8",authDomain:"tielbeke3.firebaseapp.com",databaseURL:"https://tielbeke3.firebaseio.com",projectId:"tielbeke3",storageBucket:"tielbeke3.appspot.com",messagingSenderId:"1010883935820",appId:"1:1010883935820:web:7666663961f7de9f4afee9"};g.Z.initializeApp(m);const h=g.Z.database();var p=h;class f extends u{async getAllFilialen(){const e=await p.ref().once("value");if(!e.exists())throw new Error("database error, try again later");const t=await e.val();return t}async addMededeling(e){const t=await p.ref().orderByChild("filiaalnummer").equalTo(e.filiaalnummer).once("value");if(!t.exists())throw new Error("filiaal niet gevonden in de database");await p.ref(Object.keys(t.val())[0]).update(e)}}const v=Symbol();class M{static createRepository(e){if(void 0===this[v][e])throw new Error("concrete instance of repository does not exists");return this[v][e]}}(0,c.Z)(M,v,{firebase:new f});var b={computed:{...(0,o.rn)({filialen:e=>e.filialen})},async mounted(){console.log({NODE_ENV:"production",BASE_URL:"/KCA/"});try{const e=M.createRepository({NODE_ENV:"production",BASE_URL:"/KCA/"}.VUE_APP_REPOSITORY);this.$store.commit("setRepository",e),await this.$store.dispatch("getAllFilialen")}catch(e){this.error=e}}},w=a(3744);const y=(0,w.Z)(b,[["render",s]]);var _=y,A=a(2201),S=a(3577);const k=e=>((0,n.dD)("data-v-23639760"),e=e(),(0,n.Cn)(),e),P={class:"container"},E=k((()=>(0,n._)("h2",{style:{"text-align":"center","font-size":"1.4em"}},"Filiaal Zoeken",-1))),C={class:"search-choices"},O={class:"search-form"},N=["placeholder","type"],D={class:"results"},I={key:0,class:"error"};function U(e,t,a,l,r,d){const s=(0,n.up)("Pagination"),o=(0,n.up)("FiliaalCard");return(0,n.wg)(),(0,n.iD)("div",P,[E,(0,n._)("div",C,[(0,n._)("label",null,[(0,n._)("input",{id:"filiaal-number",onChange:t[0]||(t[0]=(...e)=>d.changeSearchMode&&d.changeSearchMode(...e)),checked:"",type:"radio",name:"search-type",value:"filiaal-nummer"},null,32),(0,n.Uk)(" FiliaalNummer ")]),(0,n._)("label",null,[(0,n._)("input",{type:"radio",onChange:t[1]||(t[1]=(...e)=>d.changeSearchMode&&d.changeSearchMode(...e)),name:"search-type",value:"adres/plaats"},null,32),(0,n.Uk)(" Adres/plaats ")]),(0,n._)("label",null,[(0,n._)("input",{type:"radio",onChange:t[2]||(t[2]=(...e)=>d.changeSearchMode&&d.changeSearchMode(...e)),name:"search-type",value:"postcode"},null,32),(0,n.Uk)(" Postcode ")])]),(0,n._)("div",O,[(0,n._)("input",{placeholder:d.searchBarMode.placeholder,type:d.searchBarMode.type,id:"search-field",class:"search-input-field",onKeyup:t[3]||(t[3]=(0,i.D2)((e=>d.search(e,d.searchBarMode.fn)),["enter"]))},null,40,N)]),e.showPagination?((0,n.wg)(),(0,n.j4)(s,{key:0,onPaginationChanged:t[4]||(t[4]=t=>e.changePagination(t)),resultAmount:r.resultSet.length},null,8,["resultAmount"])):(0,n.kq)("",!0),(0,n._)("div",D,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.results,(e=>((0,n.wg)(),(0,n.j4)(o,{key:e.filiaalnummer,filiaal:e},null,8,["filiaal"])))),128)),r.error?((0,n.wg)(),(0,n.iD)("p",I,(0,S.zw)(r.error),1)):(0,n.kq)("",!0)])])}a(7658);const R=e=>((0,n.dD)("data-v-090f8e88"),e=e(),(0,n.Cn)(),e),x={class:"result-card"},j=R((()=>(0,n._)("p",{class:"header"},"FiliaalNummer:",-1))),F=R((()=>(0,n._)("p",{class:"header"},"Adres:",-1))),B=["href"],V={key:0,class:"header"},q={key:1},z={key:2,class:"header"},L={key:3},$={key:4},K=R((()=>(0,n._)("p",{class:"header"},"Mededeling",-1))),Z={key:0,class:"mededeling"};function T(e,t,a,l,r,d){return(0,n.wg)(),(0,n.iD)("div",x,[j,(0,n._)("p",null,(0,S.zw)(a.filiaal.filiaalnummer),1),F,(0,n._)("a",{class:"address-link",href:d.addressMapUrl},[(0,n._)("p",null,(0,S.zw)(a.filiaal.address),1)],8,B),a.filiaal.postcode?((0,n.wg)(),(0,n.iD)("p",V,"Postcode")):(0,n.kq)("",!0),a.filiaal.postcode?((0,n.wg)(),(0,n.iD)("p",q,(0,S.zw)(a.filiaal.postcode),1)):(0,n.kq)("",!0),a.filiaal.info?((0,n.wg)(),(0,n.iD)("p",z,"Info:")):(0,n.kq)("",!0),a.filiaal.info?((0,n.wg)(),(0,n.iD)("p",L,(0,S.zw)(a.filiaal.info),1)):(0,n.kq)("",!0),a.filiaal.mededeling?((0,n.wg)(),(0,n.iD)("div",$,[K,a.editMededelingMode?(0,n.wy)(((0,n.wg)(),(0,n.iD)("textarea",{key:1,class:"edit-mededeling","onUpdate:modelValue":t[0]||(t[0]=e=>d.mededeling=e),cols:"50",rows:"4"},null,512)),[[i.nr,d.mededeling]]):((0,n.wg)(),(0,n.iD)("p",Z,[(0,n._)("pre",null,(0,S.zw)(d.mededeling),1)]))])):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"default",{},void 0,!0)])}var G={data(){return{enteredMededeling:this.filiaal.mededeling}},props:{filiaal:{type:Object},editMededelingMode:{type:Boolean,default:!1}},computed:{addressMapUrl(){return`${{NODE_ENV:"production",BASE_URL:"/KCA/"}.VUE_APP_MAPS_APPLICATION_URL}?q=${this.filiaal.address}`},mededeling:{get(){return this.enteredMededeling},set(e){this.enteredMededeling=e,this.$emit("mededelingAdded",e)}}}};const Y=(0,w.Z)(G,[["render",T],["__scopeId","data-v-090f8e88"]]);var H=Y;const W={class:"pagination-container"},Q={class:"result-amount"},X={key:0,class:"pagination-btns"},J=["onClick"];function ee(e,t,a,i,l,r){return(0,n.wg)(),(0,n.iD)("div",W,[(0,n._)("p",Q,"Resultaten: "+(0,S.zw)(a.resultAmount),1),r.paginationSize.length>1?((0,n.wg)(),(0,n.iD)("div",X,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.paginationSize,(e=>((0,n.wg)(),(0,n.iD)("button",{class:"pagination-btn",role:"button",onClick:t=>r.setPagination(e),key:e,style:(0,S.j5)(r.paginationButtonSelected(e))},(0,S.zw)(e),13,J)))),128))])):(0,n.kq)("",!0)])}var te={data(){return{currentPage:1}},props:{resultAmount:{type:Number,default:0}},computed:{paginationSize(){const e=this.resultAmount/{NODE_ENV:"production",BASE_URL:"/KCA/"}.VUE_APP_PAGINATION_SIZE+1,t=[];if(e>0){for(let a=1;a<e;++a)t.push(a);return t}return[]}},methods:{paginationButtonSelected(e){return e===this.currentPage?{backgroundColor:"#f9bca3"}:{}},setPagination(e){this.currentPage=e,this.$emit("paginationChanged",this.currentPage)}}};const ae=(0,w.Z)(te,[["render",ee],["__scopeId","data-v-250c7032"]]);var ie=ae,ne={data(){return{currentPaginatedResultSet:[]}},computed:{showPagination(){return this.resultSet.length>{NODE_ENV:"production",BASE_URL:"/KCA/"}.VUE_APP_PAGINATION_SIZE}},methods:{changePagination(e){this.currentPaginatedResultSet=this.resultSet.slice((e-1)*{NODE_ENV:"production",BASE_URL:"/KCA/"}.VUE_APP_PAGINATION_SIZE,e*{NODE_ENV:"production",BASE_URL:"/KCA/"}.VUE_APP_PAGINATION_SIZE)}}};const le=ne;var re=le,de={mixins:[re],components:{FiliaalCard:H,Pagination:ie},props:{filialen:{type:Object}},data(){return{resultSet:[],error:"",searchMode:"filiaal-nummer"}},computed:{searchBarMode(){const e={"filiaal-nummer":{type:"number",placeholder:"Voer filiaalnummer in",fn:this.searchFiliaalNummer},"adres/plaats":{type:"text",placeholder:"Voer adres of plaats in",fn:this.searchAddress},postcode:{type:"text",placeholder:"Voer postcode in",fn:this.searchPostcode}};return e[this.searchMode]},results(){return this.currentPaginatedResultSet.length>0?this.currentPaginatedResultSet:this.resultSet}},methods:{searchFiliaalNummer(e){const t=e.target.value,a=this.filialen[t];void 0!==a?this.resultSet.push(a):this.error=`filiaal met nummer: "${t}" niet gevonden`},searchAddress(e){const t=e.target.value;""!==t&&this.searchImpl(t,"address",(e=>e.toLowerCase().includes(t.toLowerCase())))},searchPostcode(e){const t=e.target.value,a=/(^\d{4}\s*\w{2}$)|(^[B|b]*\s*\d{4,5}$)/;if(!a.test(t))return void(this.error="Postcode moet naar geldig Nederlandse of Belgische conventie ingevoerd worden");const i=/\s+/g;this.searchImpl(t,"postcode",(e=>e.toLowerCase().replace(i,"")===t.toLowerCase().replace(i,"")))},searchImpl(e,t,a){for(let i of Object.values(this.filialen))i&&i[t]&&a(i[t])&&this.resultSet.push(i);0===this.resultSet.length&&(this.error=`Geen filialen gevonden met zoekterm: "${e}"`)},search(e,t){this.resetScreen(),t(e);const a=1;this.changePagination(a),this.clearInput()},resetScreen(){this.resultSet=[],this.error=""},changeSearchMode(e){this.searchMode=e.target.value},clearInput(){document.querySelector("#search-field").value=""}}};const se=(0,w.Z)(de,[["render",U],["__scopeId","data-v-23639760"]]);var oe=se;const ce={class:"container"},ue={key:1,class:"modal"},ge={class:"modal-body"},me=(0,n.uE)('<p class="modal-body-text" data-v-b28037a6>Mededeling toevoegen</p><span class="input-field" data-v-b28037a6><label for="modal-filiaal-nummer" data-v-b28037a6>FiliaalNummer:</label><input style="width:4.5em;" type="Number" id="modal-filiaal-nummer" data-role="input-filiaalnummer" data-v-b28037a6></span><span class="input-field" data-v-b28037a6><label for="modal-mededeling" data-v-b28037a6>Mededeling:</label><textarea id="modal-mededeling" data-role="input-mededeling" cols="50" rows="5" data-v-b28037a6></textarea></span>',3),he={class:"modal-btns"},pe={class:"results"},fe=["onClick"],ve=["onClick"];function Me(e,t,a,l,r,d){const s=(0,n.up)("Pagination"),o=(0,n.up)("FiliaalCard");return(0,n.wg)(),(0,n.iD)("div",ce,[(0,n.wy)((0,n._)("div",{class:"message"},(0,S.zw)(r.message),513),[[i.F8,r.message]]),(0,n._)("button",{class:"btn add-mededeling-btn",role:"button",onClick:t[0]||(t[0]=(...e)=>d.toggleAddMededelingModal&&d.toggleAddMededelingModal(...e))}," Mededeling toevoegen "),e.showPagination?((0,n.wg)(),(0,n.j4)(s,{key:0,onPaginationChanged:t[1]||(t[1]=t=>e.changePagination(t)),resultAmount:d.resultSet.length},null,8,["resultAmount"])):(0,n.kq)("",!0),r.showAddMededelingModal?((0,n.wg)(),(0,n.iD)("div",ue,[(0,n._)("div",ge,[me,(0,n._)("div",he,[(0,n._)("button",{role:"button",class:"modal-btn",onClick:t[2]||(t[2]=(...e)=>d.addMededeling&&d.addMededeling(...e))}," Toevoegen "),(0,n._)("button",{onClick:t[3]||(t[3]=(...e)=>d.toggleAddMededelingModal&&d.toggleAddMededelingModal(...e)),role:"button",class:"modal-btn"}," Annuleren ")])])])):(0,n.kq)("",!0),(0,n._)("div",pe,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.results,((e,a)=>((0,n.wg)(),(0,n.j4)(o,{key:e.filiaalnummer,filiaal:e,editMededelingMode:r.editMededelingMode[a],onMededelingAdded:t[4]||(t[4]=e=>r.mededeling=e)},{default:(0,n.w5)((()=>[r.editMededelingMode[a]?((0,n.wg)(),(0,n.iD)("button",{key:0,role:"button",class:"btn edit-mededeling-btn",onClick:t=>d.editMededeling(e,a)}," Opslaan ",8,fe)):((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:e=>r.editMededelingMode[a]=!0,role:"button",class:"btn edit-mededeling-btn"}," Aanpassen ",8,ve))])),_:2},1032,["filiaal","editMededelingMode"])))),128))])])}var be={mixins:[re],components:{FiliaalCard:H,Pagination:ie},props:{filialen:{type:Object}},data(){return{showAddMededelingModal:!1,editMode:{},message:"",editMededelingMode:{},mededeling:""}},computed:{resultSet(){return Object.values(this.filialen).filter((e=>e.mededeling)).map((e=>({filiaalnummer:e["filiaalnummer"],address:e["address"],mededeling:e["mededeling"]})))},results(){return 0===this.currentPaginatedResultSet.length?this.resultSet.slice(0,{NODE_ENV:"production",BASE_URL:"/KCA/"}.VUE_APP_PAGINATION_SIZE):this.currentPaginatedResultSet}},methods:{toggleAddMededelingModal(){this.showAddMededelingModal=!this.showAddMededelingModal,this.toggleScrolling()},toggleScrolling(){const e=document.querySelector("body");this.showAddMededelingModal?e.style.overflow="hidden":e.style.overflow="auto"},editMededeling(e,t){this.mededeling?(e.mededeling=this.mededeling,this.updateMededeling(e),this.editMededelingMode[t]=!1):this.setMessage(`Er is geen mededeling ingevoerd voor filiaal met nummer: ${e.filiaalnummer}, graag een mededeling invoeren`,!1)},addMededeling(){const e=document.querySelector('[data-role="input-filiaalnummer"]').value,t=this.filialen[e];if(void 0===t)this.setMessage(`Filiaal met nummer: ${e} bestaat niet`,!1);else{const e=document.querySelector('[data-role="input-mededeling"]').value;t.mededeling?t.mededeling+="\n"+e:t.mededeling=e,this.updateMededeling(t)}this.toggleAddMededelingModal()},async updateMededeling(e){try{await this.$store.dispatch("addMededeling",e),e.mededeling?this.setMessage(`Mededeling toevoegd aan filiaal met nummer: ${e.filiaalnummer}`,!0):this.setMessage(`Mededeling verwijderd van filiaal met nummer: ${e.filiaalnummer}`,!0)}catch(t){this.setMessage(t,!1)}},setMessage(e,t){this.message=e;const a=t?"success":"error",i=document.querySelector(".message");i.classList.add(a),setTimeout((()=>{i.classList.remove(a),this.message=""}),3e3)}}};const we=(0,w.Z)(be,[["render",Me],["__scopeId","data-v-b28037a6"]]);var ye=we;const _e=[{path:"/",name:"mainScreen",component:oe},{path:"/mededelingen",name:"Mededelingen",component:ye}],Ae=(0,A.p7)({history:(0,A.PO)("/KCA/"),routes:_e});var Se=Ae,ke=(0,o.MT)({state:{filialen:{},repository:null},mutations:{setAllFilialen(e,t){for(const a of Object.values(t))e.filialen[a.filiaalnummer]=a},setMededeling(e,t){e.filialen[t.filiaalnummer].mededeling=t.mededeling},setRepository(e,t){e.repository=t}},actions:{async getAllFilialen({state:e,commit:t}){const a=await e.repository.getAllFilialen();t("setAllFilialen",a)},async addMededeling({state:e,commit:t},a){e.repository.addMededeling(a),t("setMededeling",a)}},modules:{}});(0,i.ri)(_).use(ke).use(Se).mount("#app")}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var l=t[i]={id:i,loaded:!1,exports:{}};return e[i](l,l.exports,a),l.loaded=!0,l.exports}a.m=e,function(){var e=[];a.O=function(t,i,n,l){if(!i){var r=1/0;for(c=0;c<e.length;c++){i=e[c][0],n=e[c][1],l=e[c][2];for(var d=!0,s=0;s<i.length;s++)(!1&l||r>=l)&&Object.keys(a.O).every((function(e){return a.O[e](i[s])}))?i.splice(s--,1):(d=!1,l<r&&(r=l));if(d){e.splice(c--,1);var o=n();void 0!==o&&(t=o)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[i,n,l]}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,l,r=i[0],d=i[1],s=i[2],o=0;if(r.some((function(t){return 0!==e[t]}))){for(n in d)a.o(d,n)&&(a.m[n]=d[n]);if(s)var c=s(a)}for(t&&t(i);o<r.length;o++)l=r[o],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},i=self["webpackChunkkca_webapp"]=self["webpackChunkkca_webapp"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(2956)}));i=a.O(i)})();
//# sourceMappingURL=app.6c71b133.js.map